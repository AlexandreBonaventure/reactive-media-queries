{"version":3,"file":"index.mjs","sources":["../src/index.ts"],"sourcesContent":["\ninterface BreakpointsOptions {\n  [key: string]: number;\n}\ninterface MediaQueryConfig {\n  [key: string]: string;\n}\n\nfunction convertBreakpointsToMediaQueries(breakpoints: BreakpointsOptions): MediaQueryConfig {\n  const keys = Object.keys(breakpoints)\n  const values = keys.map(key => breakpoints[key])\n  const breakpointValues = [0, ...values.slice(0, -1)]\n  const mediaQueries = breakpointValues.reduce((sum, value, index) => {\n    const isLast = index === keys.length - 1\n    const minWidth = `${value}px`\n    const maxWidth = !isLast ? `${breakpointValues[index + 1] - 1}px` : ''\n    const mediaQuery: string = `(min-width: ${minWidth})` + (maxWidth && ` and (max-width: ${maxWidth})`)\n    return Object.assign(sum, {\n      [keys[index]]: mediaQuery,\n    })\n  }, {})\n  return mediaQueries\n}\n\nfunction subscribeToMediaQuery(id: string, mediaQuery: string, callback: (id: string) => any): () => any {\n  const mql = window.matchMedia(mediaQuery)\n  const cb: (obj: any) => any = ({ matches }) => {\n    if (matches) callback(id)\n  }\n  mql.addListener(cb) // subscribing\n  cb(mql) // initial trigger\n  return () => mql.removeListener(cb) // return unsubscribtion\n}\n\n\nfunction reactToBreakpoints(breakpoints: BreakpointsOptions, callback: (id: string) => any) {\n  const teardowns: Array<() => any> = []\n  const mediaQueriesStrings = convertBreakpointsToMediaQueries(breakpoints)\n  for (const key in mediaQueriesStrings) {\n    const mediaQuery = mediaQueriesStrings[key]\n    const teardown = subscribeToMediaQuery(key, mediaQuery, (id) => {\n      callback(id)\n    })\n    teardowns.push(teardown)\n  }\n  const destroy = () => {\n    for (let teardown of teardowns) {\n      teardown()\n    }\n  }\n  return destroy\n}\n\nexport default reactToBreakpoints\n\n"],"names":["subscribeToMediaQuery","id","mediaQuery","callback","mql","window","matchMedia","cb","ref","addListener","removeListener","breakpoints","teardowns","mediaQueriesStrings","keys","Object","values","map","key","breakpointValues","slice","reduce","sum","value","index","maxWidth","length","assign","convertBreakpointsToMediaQueries","const","teardown","push"],"mappings":"AAwBA,SAASA,EAAsBC,EAAYC,EAAoBC,OACvDC,EAAMC,OAAOC,WAAWJ,GACxBK,WAAyBC,cAChBL,EAASF,WAExBG,EAAIK,YAAYF,GAChBA,EAAGH,qBACUA,EAAIM,eAAeH,mBAIlC,SAA4BI,EAAiCR,OACrDS,EAA8B,GAC9BC,EA7BR,SAA0CF,OAClCG,EAAOC,OAAOD,KAAKH,GACnBK,EAASF,EAAKG,aAAIC,UAAOP,EAAYO,KACrCC,EAAmB,CAAC,UAAMH,EAAOI,MAAM,GAAI,WAC5BD,EAAiBE,gBAAQC,EAAKC,EAAOC,SAGlDC,EAFSD,IAAUV,EAAKY,OAAS,EAE6B,GAAtCP,EAAiBK,EAAQ,GAAK,cAErDT,OAAOY,OAAOL,MAAK,IACvBR,EAAKU,4BAFiDC,uBAAgCA,YAIxF,IAiByBG,CAAiCjB,OACxDkB,IAAMX,KAAOL,EAAqB,KAE/BiB,EAAW9B,EAAsBkB,EADpBL,EAAoBK,YACkBjB,GACvDE,EAASF,KAEXW,EAAUmB,KAAKD,yBAGV,UAAgBlB,mBACnBkB"}